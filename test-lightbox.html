<!DOCTYPE html>
<html lang="fr">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>Test Lightbox Instagram</title>
    <link rel="stylesheet" href="extensions/instahop/assets/instagram-lightbox.css">
</head>
<body>
    <h1>Test Lightbox Instagram</h1>
    
    <!-- Grille de posts test -->
    <div class="instagram-feed" style="display: grid; grid-template-columns: repeat(3, 1fr); gap: 15px; padding: 20px; max-width: 800px;">
        <div class="instagram-post grid-post" style="border-radius: 8px; position: relative; cursor: pointer;" onclick="openLightbox(0)">
            <img src="https://picsum.photos/400/400?random=1" alt="Post test 1" width="400" height="400" loading="lazy" class="grid-img" style="width: 100%; height: 100%; object-fit: cover;">
        </div>
        <div class="instagram-post grid-post" style="border-radius: 8px; position: relative; cursor: pointer;" onclick="openLightbox(1)">
            <img src="https://picsum.photos/400/400?random=2" alt="Post test 2" width="400" height="400" loading="lazy" class="grid-img" style="width: 100%; height: 100%; object-fit: cover;">
        </div>
        <div class="instagram-post grid-post" style="border-radius: 8px; position: relative; cursor: pointer;" onclick="openLightbox(2)">
            <img src="https://picsum.photos/400/400?random=3" alt="Post test 3" width="400" height="400" loading="lazy" class="grid-img" style="width: 100%; height: 100%; object-fit: cover;">
        </div>
    </div>

    <!-- Lightbox HTML -->
    <div id="instagram-lightbox">
        <button class="lightbox-nav lightbox-nav-prev" onclick="navigatePost(-1)">&lt;</button>
        <button class="lightbox-nav lightbox-nav-next" onclick="navigatePost(1)">&gt;</button>

        <div class="lightbox-content">
            <div class="lightbox-image-container" style="position: relative;">
                <img id="lightbox-image" alt="Instagram post" width="800" height="800" style="display: none;">
                <video id="lightbox-video" controls autoplay style="display: none; width: 100%; height: 100%; object-fit: cover;"></video>
            </div>
            
            <div class="lightbox-info">
                <div class="lightbox-header">
                    <span id="lightbox-username" class="lightbox-username">@test_user</span>
                    <button class="lightbox-close" onclick="closeLightbox()">&times;</button>
                </div>
                <div class="lightbox-body">
                    <p id="lightbox-caption" class="lightbox-caption">Caption du post test</p>
                    <div id="lightbox-hashtags" class="lightbox-hashtags">#test #instagram</div>
                    <div id="lightbox-products" class="lightbox-products"></div>
                </div>
                <div class="lightbox-footer">
                    <div id="lightbox-stats" class="lightbox-stats">‚ù§Ô∏è 123 üí¨ 45</div>
                    <a id="lightbox-link" href="#" target="_blank" rel="noopener" class="lightbox-link">
                        Voir sur Instagram
                    </a>
                </div>
            </div>
        </div>
    </div>

    <script src="extensions/instahop/assets/instagram-lightbox.js"></script>
    <script>
        // Donn√©es de test
        const testPosts = [
            {
                id: 'test1',
                mediaUrl: 'https://picsum.photos/800/800?random=1',
                caption: 'Premier post de test avec des produits taggu√©s',
                permalink: '#'
            },
            {
                id: 'test2', 
                mediaUrl: 'https://picsum.photos/800/800?random=2',
                caption: 'Deuxi√®me post de test',
                permalink: '#'
            },
            {
                id: 'test3',
                mediaUrl: 'https://picsum.photos/800/800?random=3', 
                caption: 'Troisi√®me post de test',
                permalink: '#'
            }
        ];

        const testTags = {
            'test1': [
                {
                    id: 'prod1',
                    title: 'Sardines Premium',
                    handle: 'sardines-premium',
                    price: '12.99',
                    currency: 'EUR',
                    image: 'https://picsum.photos/100/100?random=10'
                },
                {
                    id: 'prod2',
                    title: 'Huile d\'olive Bio',
                    handle: 'huile-olive-bio',
                    price: '8.50',
                    currency: 'EUR',
                    image: 'https://picsum.photos/100/100?random=11'
                }
            ],
            'test2': [
                {
                    id: 'prod3',
                    title: 'Conserve Artisanale',
                    handle: 'conserve-artisanale',
                    price: '15.99',
                    currency: 'EUR',
                    image: 'https://picsum.photos/100/100?random=12'
                }
            ]
        };

        // Initialiser la lightbox
        console.log('Initialisation de la lightbox de test...');
        console.log('Posts:', testPosts);
        console.log('Tags:', testTags);
        
        window.initInstagramLightbox(testPosts, testTags);
    </script>
</body>
</html>